
# 🧠 MindChatBot

**MindChatBot** is an AI-powered mental health companion built with **Spring Boot**, **MongoDB**, and a **vanilla HTML/CSS/JavaScript frontend**.  
It helps users **track their mood**, **analyze journal entries**, and **receive emotional feedback** generated by the **OpenAI GPT API (`gpt-4o-mini`)** — one of the most efficient and affordable models.

---

## 💡 Motivation

Mental health is often overlooked in busy daily life.  
MindChatBot offers a simple way to **express your emotions**, **reflect on your day**, and **get AI-driven emotional insights** — all in one app.

---

## 🌟 Features

### 💬 Chat with AI
- Communicate with an intelligent chatbot that understands your emotional state.
- GPT-based responses provide **empathetic and personalized feedback**.
- Uses `gpt-4o-mini` — optimized for cost-effective emotion analysis and natural language.

### 🗓️ Mood Tracker
- Record your **daily mood** through a visual calendar interface.
- GPT analyzes journal entries to **detect emotions automatically** and updates your mood calendar.

### 📔 Journal & Emotion Detection
- Write daily reflections.
- Each entry is analyzed by GPT and **emotion tags** are stored in MongoDB.
- The chatbot provides short, casual, and friendly responses.

### 🔐 Authentication & Security
- **Two-Factor Registration** via **email verification**.
- User accounts are protected using **JWT tokens** (environment variable `JWT_SECRET_KEY`).
- Mail service configured via Gmail SMTP for secure delivery.

### 🌐 Multi-Language Support
- Supports **three languages:** 🇷🇺 Russian, 🇰🇷 Korean, and 🇬🇧 English.  
- Uses Spring internationalization (`spring.messages`) with UTF-8 encoding.

### ☁️ Hosting & Integration
- Hosted on **Google Cloud Platform (GCP Free Tier)**.
- Deployed using **Docker containers** built for the `linux/amd64` platform.
- Real-time deployed address:  
  👉 **[https://mindchatbot-service-829582230843.asia-northeast3.run.app/login](https://mindchatbot-service-829582230843.asia-northeast3.run.app/login)**
---
## 🎬 Demo
https://github.com/Tsyren03/MindChatBot2/issues/1#issue-3577293240

---
## 🧩 Tech Stack

| Layer | Technology |
|:------|:------------|
| Backend | Spring Boot (Java 17, Gradle) |
| Database | MongoDB |
| AI Integration | OpenAI GPT API (`gpt-4o-mini`) |
| Frontend | HTML, CSS, JavaScript |
| Authentication | JWT + Email Verification |
| Deployment | Docker + Google Cloud Platform (Free Tier) |
| Version Control | Git & GitHub |

---

## ⚙️ Architecture Overview

```

Frontend (HTML/CSS/JS)
↓
Spring Boot REST API
↓
MongoDB ←→ OpenAI GPT API

```

- The frontend communicates with the backend via REST APIs.  
- The backend processes user input, GPT analysis, and mood detection.  
- MongoDB stores chat logs, journal entries, and user mood data.  
- UTF-8 encoding and internationalization support are enabled.

---

## 🧱 Prerequisites

Before running the project, ensure you have the following installed:

- **Java 17**
- **MongoDB** (local or remote)
- **Gradle**
- **Docker**
- **OpenAI API Key** (from [OpenAI Platform](https://platform.openai.com/))
- **Mail App Password** for Gmail SMTP
- **JWT Secret Key**

### 🧩 Environment Variables Required
```

OPENAI_API_KEY=your_openai_key
MONGO_URI=your_mongodb_uri
MAIL_PASSWORD=your_gmail_app_password
JWT_SECRET_KEY=your_jwt_secret

````

---

## 🚀 Getting Started (Local)

### 1. Clone the Repository
```bash
git clone https://github.com/Tsyren03/MindChatBot2.git
cd MindChatBot2
````

### 2. Start MongoDB

If you are using Homebrew on macOS:

```bash
mongod --dbpath "$BREW_PREFIX/var/mongodb" \
       --logpath "$BREW_PREFIX/var/log/mongodb/mongo.log" \
       --fork --bind_ip 127.0.0.1 --port 27017
mongosh
```

### 3. Configure Environment Variables

Create a `.env` file or set environment variables in your terminal:

```
OPENAI_API_KEY=your_api_key_here
MONGO_URI=your_local_or_atlas_uri
MAIL_PASSWORD=your_gmail_app_password
JWT_SECRET_KEY=your_jwt_secret
```

### 4. Build and Run the Backend

```bash
./gradlew bootRun
```

Runs on:
👉 `http://localhost:8080`



---

## 🐳 Docker & Google Cloud Deployment

This project is **Dockerized** and deployed on **Google Cloud Platform (Free Tier)**.

### Build Docker Image

```bash
docker build --platform linux/amd64 -t asia-northeast3-docker.pkg.dev/mindchatbot-474810/mindchatbot-repo/mindchatbot-java:v1 .
```

### Push Image to Google Artifact Registry

```bash
docker push asia-northeast3-docker.pkg.dev/mindchatbot-474810/mindchatbot-repo/mindchatbot-java:v1
```

### Notes

* Hosted in the **Asia-Northeast3 (Seoul)** region.
* Automatically stops when GCP Free Tier credits are used up — preventing overcharges.

---

## ⚙️ Configuration Summary (`application.yml`)

```yaml
server:
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

spring:
  messages:
    basename: messages
    encoding: UTF-8
    fallback-to-system-locale: false
  thymeleaf:
    encoding: UTF-8
    cache: false
  data:
    mongodb:
      uri: ${MONGO_URI}
  mail:
    host: smtp.gmail.com
    port: 587
    username: mindchatbotst@gmail.com
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls.enable: true
  web:
    resources:
      static-locations: classpath:/static/

openai:
  api.key: ${OPENAI_API_KEY}
  model: gpt-4o-mini
  system.prompt: |
    You are a kind, emotionally smart mental health assistant.
    Keep replies short, casual, and friendly—like social media messages.
    Listen well and respond with empathy without repeating yourself.
    Encourage sharing, but don’t push.

jwt:
  secret: ${JWT_SECRET_KEY}

logging:
  level:
    org.springframework.security: INFO
    MindChatBot.mindChatBot: INFO
```

---

## 🧠 Core Packages (Backend)

```
MindChatBot/
 ├── controller/       → REST Controllers for Chat, Mood, Journal, Auth
 ├── service/          → Business logic & OpenAI integration
 ├── model/            → MongoDB data models (ChatLog, Mood, JournalEntry, User)
 ├── repository/       → MongoDB repositories
 ├── config/           → App, Mail, and Security configuration
 └── util/             → Utility classes and helpers
```

---

## 📦 Example API Endpoints

| Endpoint             | Method     | Description                               |
| -------------------- | ---------- | ----------------------------------------- |
| `/api/chat`          | POST       | Send message to GPT and get reply         |
| `/api/mood`          | GET / POST | Retrieve or save daily mood               |
| `/api/journal`       | POST       | Save journal entry and analyze mood       |
| `/api/auth/register` | POST       | Register new user with email verification |
| `/api/auth/login`    | POST       | User login and JWT token issuance         |

---

## 🧑‍💻 Author

**Yury Li (이유리)**
💻 Computer Science Student |
📧 Contact: [GitHub Profile](https://github.com/Tsyren03)

---

## 🪪 License

This project is licensed under the **MIT License**.

---

## ❤️ Acknowledgments

* [OpenAI GPT API](https://platform.openai.com/)
* [Spring Boot Framework](https://spring.io/projects/spring-boot)
* [MongoDB](https://www.mongodb.com/)
* [Gradle](https://gradle.org/)
* [Google Cloud Platform](https://cloud.google.com/)
* [Docker](https://www.docker.com/)

```
