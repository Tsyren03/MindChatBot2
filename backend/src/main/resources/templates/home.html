<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>My Profile - MindChatBot</title>

    <!-- Favicons -->
    <link rel="icon" th:href="@{/icons/favicon.ico?v=3}" href="/icons/favicon.ico?v=3">
    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/icons/favicon-32.png?v=3}" href="/icons/favicon-32.png?v=3">
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/icons/favicon-16.png?v=3}" href="/icons/favicon-16.png?v=3">
    <link rel="apple-touch-icon" th:href="@{/icons/apple-touch-icon.png?v=3}" href="/icons/apple-touch-icon.png?v=3">
    <meta name="theme-color" content="#0b0e23">
    <meta name="msapplication-TileImage" content="/icons/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#0b0e23">
    <link rel="manifest" th:href="@{/icons/site.webmanifest?v=3}" href="/icons/site.webmanifest?v=3">

    <!-- App base styles -->
    <link rel="stylesheet" th:href="@{/css/styles.css}" href="/css/styles.css" />
    <link rel="stylesheet" th:href="@{/css/auth.css}" href="/css/auth.css" />
    <!-- New profile styles -->
    <link rel="stylesheet" th:href="@{/css/profile.css?v=2}" href="/css/profile.css?v=2" />
</head>

<body class="bg-grad-purple">
<main class="profile-page">
    <section class="profile-card section">
        <header class="profile-header">
            <div class="avatar" aria-hidden="true">
                <span id="profile-initials">MC</span>
                <img class="avatar-fallback" th:src="@{/icons/app-icon-64.png}" src="/icons/app-icon-64.png" alt="" />
            </div>
            <div class="title-group">
                <h1 class="profile-title">Profile Information</h1>
                <p class="profile-sub" id="profile-sub">‚Äî</p>
            </div>
        </header>

        <div class="profile-grid">
            <div class="profile-info">
                <div class="kv"><b>Name</b><span id="profile-name" class="muted skeleton">Loading‚Ä¶</span></div>
                <div class="kv"><b>Email</b><span id="profile-email" class="muted skeleton">Loading‚Ä¶</span></div>
                <div class="kv"><b>Joined</b><span id="profile-joined" class="muted skeleton">Loading‚Ä¶</span></div>

                <div class="actions">
                    <a th:href="@{/index(lang=${#locale.language})}" href="/index" class="stylish-btn" data-variant="gray">‚Üê <span th:text="#{nav.main}">Main</span></a>
                    <a th:href="@{/notes(lang=${#locale.language})}" href="/notes" class="stylish-btn" data-variant="accent"><span th:text="#{nav.viewAllNotes}">All Notes</span></a>
                    <form th:action="@{/logout}" method="post" class="inline">
                        <button type="submit" class="stylish-btn" data-variant="gray" th:text="#{buttons.logout}">Logout</button>
                    </form>
                </div>
            </div>

            <aside class="profile-stats">
                <div class="stat-card">
                    <div class="stat-top">
                        <span class="stat-icon">üî•</span>
                        <span class="stat-label">Current Streak</span>
                    </div>
                    <div class="stat-value" id="stat-streak">0</div>
                    <small class="stat-hint">Same main mood in a row</small>
                </div>

                <div class="stat-card">
                    <div class="stat-top">
                        <span class="stat-icon">üéØ</span>
                        <span class="stat-label">Most Frequent</span>
                    </div>
                    <div class="stat-value mood-chip" id="stat-most">‚Äî</div>
                    <small class="stat-hint">Last 30 days</small>
                </div>

                <div class="stat-card">
                    <div class="stat-top">
                        <span class="stat-icon">üóìÔ∏è</span>
                        <span class="stat-label">Days Logged</span>
                    </div>
                    <div class="stat-value" id="stat-days">0</div>
                    <small class="stat-hint">This month</small>
                </div>
            </aside>
        </div>

        <div class="heat-strip-wrap">
            <div class="heat-strip-head">
                <strong>Last 30 days</strong>
                <span class="legend">
          <i class="legend-box legend-bad"></i>Bad
          <i class="legend-box legend-poor"></i>Poor
          <i class="legend-box legend-neutral"></i>Neutral
          <i class="legend-box legend-good"></i>Good
          <i class="legend-box legend-best"></i>Best
        </span>
            </div>
            <div id="heat-strip" class="heat-strip" aria-label="Mood heat strip"></div>
        </div>
    </section>
</main>

<!-- New profile logic -->
<script th:src="@{/js/profile.js?v=2}" src="/js/profile.js?v=2" defer></script>
</body>
</html>
